Placeholder for a chapter on importing and exporting data. Most of these features where already discussed in the section on the Workbench, but especially importing and exporting geometric information may need some additional clarification. 

* how to export geometric data, what file types are supported, what are possible pipelines to transfer information from Replicad to STEP to STL or OBJ format. Resolution of tesselation, difference between quality of tesselation produced by different softwares.  

* how to import geometric data, what types of information can be imported, how, what are the options to use the imported shapes for further modification. What are approaches to extract geometric information from other programs if the tools provided by Replicad make modelling tasks difficult. 

## 10.1 Exporting shapes

Apart from saving the javascript input file, Replicad offers three options to save your work for further modification or 3D printing. These options are: 

* Save the shapes in STL format
* Save the shapes in STEP format
* Save the shapes in JSON format

![image](https://github.com/raydeleu/ReplicadManual/assets/38007983/17f770fd-730a-470a-952c-a97035e82513)**

Which option is best depends on the purpose of the export. Two scenario's will be discussed in the next sections.

### 10.1.1 Exporting for 3D printing



STL or Stereo Lithography format describes the model with a mesh of triangle-shaped polygons. It is therefore an approximation of the 3D shape and may be considered a "lossy" format: data is lost in the conversion towards STL and the original format cannot be recovered from this format. The STL format is often used to transfer a 3D model to a 3D printer or CNC machine. 

https://ultimaker.com/software/ultimaker-cura/#downloads

![image](https://github.com/raydeleu/ReplicadManual/assets/38007983/da40e7fa-fa52-41dc-8773-8638dddc3e75)


STEP stands for "Standard for the Exchange of Product Data" and is a format defined in ISO 10303. It can describe a shape in terms of curves and faces. Additionally it can contain information on material, tolerances and colour of the object. The STEP format is the most appropriate format to transfer the model to other 3D design software as this file most accurately describes the shape.

https://www.opencascade.com/products/cad-assistant/


![image](https://github.com/raydeleu/ReplicadManual/assets/38007983/606b44ca-be24-4533-a0c8-76fd9d5a831b)

The CAD assistant allows an export of the shape to polygon formats such as OBJ, WRL, STL but also a format  like IGES that contains all the detail of curves and arcs. 

The accuracy of the STL file can be influenced ???. 

protected _mesh({ tolerance = 1e-3, angularTolerance = 0.1 }
blobSTL({ tolerance = 1e-3, angularTolerance = 0.1 }

MeshRes in the dialog is linked to the internal variable maxDeviation which is in fact a much better name. The variable determines the maximum distance between the approximated triangular surface from the surface determined from the mathematical curves. The lower this value, the more accurate the model will be represented in the 3D window and the more accurate the export file will be. This comes at a cost however. A more detailed model will take more time to render in the 3D view and result in larger meshes in the exported files.







## 10.2 Importing shapes

### 10.2.1 Importing 2D shapes

Replicad currently offers no option to import 2D sketches. Yet this functionality could be practical. Think of the following cases: 

* You are given een 3D-view (side, front, top) of an object with dimensions that assume that you have a so-called constraint based modeller. A constraint based modeller, such as most visual 3D CAD programs, allow to enter the dimensions and relations between drawing segments to end up with a fully defined shape. Without this capability, finding the coordinates of these sketches often involves tedious geometric calculations. An alternative is to seek other ways to create the same shape, to measure the coordinates from the drawing or do some trial and error until the shape looks right. But you could also use one of the freely available tools to create the 2D sketch and import this sketch into Replicad. Examples of freely available tools that support constraint based modelling are `Freecad`  (https://www.freecad.org/), `Solvespace` ([[https://solvespace.com](https://solvespace.com/index.pl)) or `jSketcher` (https://github.com/xibyte/jsketcher).

* It might be the case that you want to use a pattern or logo to embellish you 3D shape. The author of Replicad has implemented a basic functionality in a website called https://blingmything.sgenoud.com/ that contains this functionality. Unfortunately this functionality is (not yet) included in Replicad. 

One option to import 2D shapes from other softwares is to analyze the files and extract the relevant coordinates. As an example take the shape shown in the image below. This shape consist of two arcs, one with radius 32 mm on the right and one with radius 20 on the left. According to the original drawing this shape is based on, the two arcs are connected with a third arc, but the radius of this arc is not given in the drawing. Using a constraint based drawing tool it turns out that by entering the dimensions and constraints given in the drawing, the shape is fully defined. In the example below the drawing at the left (or top) was created in `SolveSpace`, the drawing at the right in `FreeCad` (see above). 

<img src="https://github.com/raydeleu/ReplicadManual/assets/38007983/34734cf8-00d8-4168-aef8-1ab47f3837d3" width="450">

<img src="https://github.com/raydeleu/ReplicadManual/assets/38007983/9adb59d6-a7f9-428d-98d7-7687e6b6f4a1" width="450">

SolveSpace supports the option to export the 2D view. Before exporting the shape you have to hide the construction lines (the green lines in the image) and the dimensions. The resulting SVG file then only contains the path of the shape. The SVG file is in fact a text file that can be opened in any text editor. The definition of the contour can be found by looking for the `path` statements. For the shape above the following path can be found in the SVG file: 

```
<path d='
M5.000 37.000
L97.000,37.000
A32.000,32.000 0 0,0 65.000,5.000
A92.667,92.667 0 0,0 13.991,20.303
A20.000,20.000 0 0,0 5.000,37.000 ' class='s1' />
```
For the purpose of clarity each separate statement is shown on a separate line, but in the actual file the statements are all contained in a single line. The elements of the path are identified by single characters. The following table shows that the drawing functions defined by these characters are very similar to the drawing methods available in Replicad. 

| SVG path command                                      | Replicad command                                            |
|-------------------------------------------------------|-------------------------------------------------------------|
|`M x y`                                                |`.movePointerTo([x,y]) or draw([x,y]) `                      |
|`m dx dy`                                              | no equivalent in Replicad other than starting new drawing   | 
|`L x,y  `                                              |`.lineTo([x,y])`                                             |
|`l dx,dy`                                              |`.line(dx,dy)  `                                             | 
|`v y`                                                  |`.vLine(dy)`                                                 |
|`h x `                                                 |`.hLine(dx)`                                                 |
|`A rx,ry deg-rotation large-arc?,sweep-positive? x,y`  |`.ellipseTo([x,y],rx,ry,deg rotation, long_way?, counter?`   | 
|`C x1 y1 x2 y2 x y`                                    |`.cubicBezierCurveTo([x,y],p1_ctrl_start,p2_ctrl_end)`       |   
|`Q controlX controlY endX endY `                       |`.quadraticBezierCurveTo([x,y],[x_ctrl,y_ctrl])`             |         
|`q dx_control dy_control dx dy `                       |`.quadraticBezierCurve(dx,dy,dx_ctrl,dy_ctrl)`               |
|`Z`                                                    |`.close()`                                                   |


Using this translation, the equivalent Replicad code is: 

```
const {draw}  = replicad

function main()
{
let contour = draw([5,37])
.lineTo([97,37])
.ellipseTo([65,5],32,32,0,false,false)
.ellipseTo([13.991,20.303],92.667,92.667,0,false,false)
.ellipseTo([5,37],20,20,0,false,false)
.close()
.sketchOnPlane("XY")

return contour}
```
The resulting shape in Replicad is shown below. Note that it is drawn upside down and not at the origin, but this can easily be corrected with a rotation and a translation. 

<img src="https://github.com/raydeleu/ReplicadManual/assets/38007983/4598b4a9-7f49-49ba-9c8c-f3fc3a767491" width="500">

In FreeCad you can export the shape in Open CAD format (.oca). The format of this file is very straight forward as for each line two points are given and for each arc three points.  

```
#oca file generated from FreeCAD

# edges
L1=P(-92.0 1.2246467986490979e-15 0.0) P(0.0 0.0 0.0)
C2=ARC P(0.0 0.0 0.0) P(-9.372583002030478 22.627416997969522 0.0) P(-32.0 32.0 0.0)
C3=ARC P(-32.0 32.0 0.0) P(-58.627570729148005 28.091902430493363 0.0) P(-83.0091743119266 16.697247706422022 0.0)
C4=ARC P(-83.0091743119266 16.697247706422022 0.0) P(-89.6094219984435 9.481996460700351 0.0) P(-92.0 1.2246467986490979e-15 0.0)
# faces
```

The approach to use another program to create a sketch does not always work, as in some cases the file will not contain arcs but pieces of straight lines that approximate a curve. In `SolveSpace` this seems the case when the drawing consists of splines or bezier curves instead of circular arcs. In that case converting the SVG is often not practical, as modifications of the resulting shapes with fillets - one of the modifications that cannot be performed in 3D by SolveSpace - often fails on these shapes. In that case you could still use the sketch and determine the location of starting and end points of arcs and curves in the software that you used to create the sketch. 

### 10.2.2 Importing 3D shapes

Replicad offers two basic options to import 3D shapes, namely import of STEP files and import of STL files.  




